!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=2)}([function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var s=.35,a=20,o=8,r=10,u=7,l=20,c=80,h=64,d=[0,64,128,196],m=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.playerSprite=new Image,this.playerSprite.src="./src/assets/divekicker_2-5-jump.png",this.spinSprite=new Image,this.spinSprite.src="./src/assets/spin_frames.png",this.x=0,this.y=125,this.velocity=0,this.sideVelocity=0,this.divekicking=!1,this.jumping=!1,this.currentSpinFrame=-1,this.spinning=!1,this.spinDelay=!1,this.invincible=!1,this.jumpCount=2,this.soundFXEnabled=!0,this.initializeSoundFX(),this.playerSprite.onload=function(){return i.draw(t)},this.draw=this.draw.bind(this)}var t,i,m;return t=e,(i=[{key:"initializeSoundFX",value:function(){this.spinSound=new Audio("./src/assets/soundFX/spin_sound.wav"),this.jumpSound=new Audio("./src/assets/soundFX/jump_sound.mp3"),this.divekickSound=new Audio("./src/assets/soundFX/divekick_sound.mp3"),this.soundFXEnabled?(this.spinSound.volume=.4,this.jumpSound.volume=.4,this.divekickSound.volume=.2):(this.spinSound.volume=0,this.jumpSound.volume=0,this.divekickSound.volume=0)}},{key:"stopSoundFX",value:function(){this.spinSound&&this.stopSpin()}},{key:"toggleSoundFX",value:function(){this.soundFXEnabled?(this.soundFXEnabled=!1,this.spinSound.volume=0,this.jumpSound.volume=0,this.divekickSound.volume=0):(this.soundFXEnabled=!0,this.spinSound.volume=.4,this.jumpSound.volume=.4,this.divekickSound.volume=.2)}},{key:"stopSpin",value:function(){this.spinTimer&&clearInterval(this.spinTimer),this.spinning=!1,this.spinDelay=!1,this.spinSound.pause(),this.spinSound.currentTime=0}},{key:"playJumpSound",value:function(){this.jumpSound.pause(),this.jumpSound.currentTime=0,this.jumpSound.play()}},{key:"playDivekickSound",value:function(){this.divekicking||(this.divekickSound.pause(),this.divekickSound.currentTime=0,this.divekickSound.play())}},{key:"getBounds",value:function(){return{top:this.y,right:this.x+h/2,left:this.x,bottom:this.y+c/2}}},{key:"hitBottom",value:function(){return this.getBounds().bottom>600}},{key:"jump",value:function(){var e=this;if(this.jumpCount){this.stopSpin(),this.divekicking=!1,this.jumping=!0,this.playJumpSound(),this.velocity=-1*o,this.jumpCount--;var t=setInterval((function(){e.jumping=!1,clearInterval(t)}),1500)}}},{key:"diveKick",value:function(){this.stopSpin(),this.playDivekickSound(),this.velocity=l,this.jumping=!1,this.divekicking=!0}},{key:"bounce",value:function(){var e=this;this.invincible=!0,this.divekicking=!1,this.jumping=!0,this.jumpCount=2,this.y-=2*r,this.velocity=-1*r;var t=setInterval((function(){e.invincible=!1,clearInterval(t)}),100),i=setInterval((function(){e.jumping=!1,clearInterval(i)}),1e3)}},{key:"spin",value:function(){var e=this;if(!this.spinning&&!this.spinDelay){this.spinning=!0,this.spinDelay=!0,this.spinSound.play(),this.spinTimer=setInterval((function(){e.spinning=!1,e.spinSound.pause(),e.spinSound.currentTime=0,clearInterval(e.spinTimer)}),800);var t=setInterval((function(){e.spinDelay=!1,clearInterval(t)}),100)}}},{key:"moveRight",value:function(){this.sideVelocity=u}},{key:"moveLeft",value:function(){this.sideVelocity=-u}},{key:"move",value:function(){this.x+=this.sideVelocity,this.y+=this.velocity,this.velocity+=s,Math.abs(this.velocity)>=a&&(this.velocity=this.velocity>0?a:-1*a)}},{key:"drawBase",value:function(e){e.drawImage(this.playerSprite,0,0,64,80,this.x,this.y,64,80)}},{key:"drawJump",value:function(e){e.drawImage(this.playerSprite,0,80,64,80,this.x,this.y,64,80)}},{key:"drawDivekick",value:function(e){e.drawImage(this.playerSprite,0,160,64,80,this.x,this.y,64,80)}},{key:"updateSpinFrame",value:function(){this.currentSpinFrame=(this.currentSpinFrame+1)%d.length}},{key:"drawSpin",value:function(e){this.updateSpinFrame();var t=d[this.currentSpinFrame];e.drawImage(this.spinSprite,0,t,64,64,this.x,this.y,64,64)}},{key:"draw",value:function(e){e.clearRect(0,0,1e3,500),this.jumping&&!this.spinning?this.drawJump(e):this.divekicking?this.drawDivekick(e):this.spinning?this.drawSpin(e):this.drawBase(e)}},{key:"animate",value:function(e){this.move(),this.draw(e)}}])&&n(t.prototype,i),m&&n(t,m),e}();function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.scrollSpeed=i,this.backgroundImg=new Image,this.backgroundImg.src="./src/assets/background.png",this.x=0}var t,i,n;return t=e,(i=[{key:"animate",value:function(){this.ctx.clearRect(0,0,1e3,500),this.x-=this.scrollSpeed,this.ctx.drawImage(this.backgroundImg,this.x,0),this.ctx.drawImage(this.backgroundImg,this.x+1600,0),-1600===this.x&&(this.x=0)}}])&&v(t.prototype,i),n&&v(t,n),e}();function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=2,g=128,k=128,S=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enemySprite=new Image,this.enemySprite.src="./src/assets/divekicker_enemy_128.png",this.moveDir=t,this.startingPosition=i,this.positiveMove=!0,this.x=i.x,this.y=i.y,this.hit=!1,this.draw=this.draw.bind(this)}var t,i,n;return t=e,(i=[{key:"getBounds",value:function(){return{top:this.y,right:this.x+k/2,left:this.x,bottom:this.y+g/2}}},{key:"move",value:function(){this.y<=this.startingPosition.y-g/2&&(this.positiveMove=!1),this.y>=this.startingPosition.y+g/2&&(this.positiveMove=!0);var e=this.positiveMove?y:-y;this.y-=e}},{key:"drawBase",value:function(e){e.drawImage(this.enemySprite,0,0,128,128,this.x,this.y,128,128)}},{key:"drawHit",value:function(e){e.drawImage(this.enemySprite,0,128,128,128,this.x,this.y,128,128)}},{key:"draw",value:function(e){this.hit?this.drawHit(e):this.drawBase(e)}},{key:"animate",value:function(e){this.move(),this.draw(e)}}])&&p(t.prototype,i),n&&p(t,n),e}();function w(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b={MAX_ENEMIES:8,SCROLL_SPEED:5,OFFSCREEN_ENEMY:[5,6,7,8]},M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.height=500,this.width=1e3,this.currentEnemyIdx=0,this.difficulty=0,this.enemies=[this.createEnemy(3),this.createEnemy(3),this.createEnemy(3),this.createEnemy(4),this.createEnemy(4),this.createEnemy(5),this.createEnemy(5)],this.soundFXEnabled=!0,this.initializeSoundFX()}var t,i,n;return t=e,(i=[{key:"initializeSoundFX",value:function(){this.spinImpactSound=new Audio("./src/assets/soundFX/spin_impact_3.wav"),this.divekickImpactSound=new Audio("./src/assets/soundFX/divekick_impact.mp3"),this.divekickImpactSound.playbackRate=2.5,this.spinImpactSound.volume=this.soundFXEnabled?.35:0,this.divekickImpactSound.volume=this.soundFXEnabled?.25:0}},{key:"toggleSoundFX",value:function(){this.soundFXEnabled?(this.soundFXEnabled=!1,this.spinImpactSound.volume=0,this.divekickImpactSound.volume=0):(this.soundFXEnabled=!0,this.spinImpactSound.volume=.35,this.divekickImpactSound.volume=.25)}},{key:"playSpinImpactSound",value:function(){this.spinImpactSound.currentTime=0,this.spinImpactSound.play()}},{key:"playDivekickImpactSound",value:function(){this.divekickImpactSound.currentTime=0,this.divekickImpactSound.play()}},{key:"randomizeEnemySpawn",value:function(e){switch(e){case 1:return{x:Math.floor(250*Math.random()),y:Math.floor(400*Math.random())+100};case 2:return{x:Math.floor(250*Math.random())+250,y:Math.floor(400*Math.random())+100};case 3:return{x:Math.floor(250*Math.random())+500,y:Math.floor(300*Math.random())+200};case 4:return{x:Math.floor(250*Math.random())+750,y:Math.floor(300*Math.random())+100};case 5:return{x:Math.floor(1*Math.random())+1e3,y:Math.floor(350*Math.random())+100};case 6:return{x:Math.floor(1*Math.random())+1100,y:Math.floor(350*Math.random())+100};case 7:return{x:Math.floor(1*Math.random())+1200,y:Math.floor(400*Math.random())};case 8:return{x:Math.floor(1*Math.random())+1200,y:Math.floor(200*Math.random())};default:return{x:Math.floor(250*Math.random()),y:Math.floor(500*Math.random())}}}},{key:"randomizeMoveDirection",value:function(){return 0===Math.floor(2*Math.random())?"horizontal":"vertical"}},{key:"collisionCheck",value:function(e,t,i){var n=e.getBounds(),s=t.getBounds();if(n.left>s.right||n.right<s.left)return!1;if(n.top>s.bottom||n.bottom<s.top)return!1;if(e.divekicking)e.bounce(),i.enemyKill(t.hit),t.hit=!0,this.playDivekickImpactSound();else if(e.spinning)i.enemyKill(t.hit),this.playSpinImpactSound(),t.hit=!0;else if(!e.invincible)return!0}},{key:"playerCollision",value:function(e,t){var i=this,n=!1;return this.enemies.forEach((function(s){i.collisionCheck(e,s,t)&&(n=!0)})),n}},{key:"createEnemy",value:function(e){return new S("vertical",this.randomizeEnemySpawn(e))}},{key:"animateEnemies",value:function(e){this.enemies.forEach((function(t){return t.animate(e)}))}},{key:"scrollEnemies",value:function(){var e=this;if(this.enemies.forEach((function(t){t.x-=b.SCROLL_SPEED+e.difficulty})),this.enemies[0].x<=200&&this.enemies.length<b.MAX_ENEMIES){var t=b.OFFSCREEN_ENEMY[this.currentEnemyIdx];this.currentEnemyIdx=(this.currentEnemyIdx+1)%b.OFFSCREEN_ENEMY.length,this.enemies.push(this.createEnemy(t))}this.enemies[0].x<=-70&&this.enemies.shift()}},{key:"animate",value:function(e){this.animateEnemies(e),this.scrollEnemies()}}])&&w(t.prototype,i),n&&w(t,n),e}();function E(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.menu=document.getElementById("menu"),this.controlsMenu=document.getElementById("controls-menu"),this.startButton=document.getElementById("start-btn"),this.controlsButton=document.getElementById("controls-menu-btn"),this.closeButton=document.getElementById("close-btn"),this.initializeSoundFX(),this.initializeMenuButtons(),this.openMenu=this.openMenu.bind(this),this.closeMenu=this.closeMenu.bind(this)}var t,i,n;return t=e,(i=[{key:"initializeSoundFX",value:function(){this.menuButtonSounds=new Audio("./src/assets/soundFX/menu_button_sounds.mp3"),this.menuButtonSounds.volume=.4}},{key:"initializeMenuButtons",value:function(){var e=this;this.startButton.addEventListener("click",this.startGame.bind(this)),this.controlsButton.addEventListener("click",(function(){return e.openMenu("controls")})),this.closeButton.addEventListener("click",(function(){return e.closeMenu("controls")}))}},{key:"playMenuButtonSound",value:function(){this.menuButtonSounds.pause(),this.menuButtonSounds.currentTime=0,this.menuButtonSounds.play()}},{key:"openMenu",value:function(e){"menu"===e?this.menu.className="open":(this.playMenuButtonSound(),this.controlsMenu.className="open")}},{key:"closeMenu",value:function(e){"menu"===e?this.menu.className="closed":(this.playMenuButtonSound(),this.controlsMenu.className="closed")}},{key:"startGame",value:function(){var e=this;this.playMenuButtonSound();var t=setInterval((function(){e.closeMenu("menu"),e.game.start(),clearInterval(t)}),500)}}])&&E(t.prototype,i),n&&E(t,n),e}();function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var F=10,x=200,X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.scoreMultiplyer=1,this.draw=this.draw.bind(this)}var t,i,n;return t=e,(i=[{key:"initializeScore",value:function(){var e=this;return this.scoreIncreaseTimer=setInterval((function(){e.score+=F*e.scoreMultiplyer}),100)}},{key:"resetScore",value:function(){this.scoreIncreaseTimer&&clearInterval(this.scoreIncreaseTimer),this.score=0,this.scoreMultiplyer=1}},{key:"enemyKill",value:function(e){e||(this.score+=x*this.scoreMultiplyer)}},{key:"draw",value:function(e){var t="SCORE: ".concat(this.score);e.font="bold 28px sans-serif",e.lineWidth=1,e.fillStyle="#ffd24c",e.fillText(t,20,40)}}])&&T(t.prototype,i),n&&T(t,n),e}();function j(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.ctx=i,this.gameStatus=!1,this.gamePaused=!1,this.player=new m(i),this.background=new f(n,1),this.level=new M,this.menu=new I(this),this.scoreTracker=new X(this),this.soundFXEnabled=!0,this.musicEnabled=!0,this.drawToggle=!1,this.currentToggle="",this.initializeControls(),this.rightPressed=!1,this.leftPressed=!1,this.finalScoreMessage=document.getElementById("final-score"),this.restartMessage=document.getElementById("restart-msg"),this.animate=this.animate.bind(this)}var t,i,n;return t=e,(i=[{key:"initializeControls",value:function(){var e=this;window.addEventListener("keydown",(function(t){if(!t.defaultPrevented)if(e.gameStatus)switch(t.code){case"Space":e.player.jump();break;case"ArrowDown":e.player.diveKick();break;case"ArrowRight":e.rightPressed=!0,e.player.moveRight();break;case"ArrowLeft":e.leftPressed=!0,e.player.moveLeft();break;case"KeyQ":e.player.spin();break;case"KeyM":e.toggleMusic();break;case"KeyN":e.toggleSoundFX();break;default:return}else switch(t.code){case"KeyR":"open"!==e.menu.menu.className&&e.start();break;case"KeyM":e.toggleMusic();break;case"KeyN":e.toggleSoundFX();break;default:return}})),window.addEventListener("keyup",(function(t){if(!t.defaultPrevented)switch(t.code){case"ArrowRight":e.rightPressed=!1,e.leftPressed||(e.player.sideVelocity=0);break;case"ArrowLeft":e.leftPressed=!1,e.rightPressed||(e.player.sideVelocity=0)}}))}},{key:"initializeGame",value:function(){this.menu.openMenu("menu"),this.gameMusic=new Audio("src/assets/music/POL-underground-army-short-looped.wav"),this.gameOverSound=new Audio("src/assets/soundFX/game_loss.mp3"),this.gameMusic.loop=!0,this.gameMusic.volume=this.musicEnabled?.35:0,this.gameOverSound.volume=this.soundFXEnabled?.35:0}},{key:"toggleMusic",value:function(){var e=this;this.musicEnabled=!this.musicEnabled,this.gameMusic.volume=this.musicEnabled?.35:0,this.currentToggle="music",this.drawToggle=!0,this.gameStatus||this.drawSoundToggle("music"),this.drawToggleTimer&&clearInterval(this.drawToggleTimer),this.drawToggleTimer=setInterval((function(){e.drawToggle=!1,clearInterval(e.drawToggleTimer)}),1500)}},{key:"toggleSoundFX",value:function(){var e=this;this.soundFXEnabled=!this.soundFXEnabled,this.gameOverSound.volume=this.soundFXEnabled?.35:0,this.player.toggleSoundFX(),this.level.toggleSoundFX(),this.currentToggle="soundFX",this.drawToggle=!0,this.gameStatus||this.drawSoundToggle("soundFX"),this.drawToggleTimer&&clearInterval(this.drawToggleTimer),this.drawToggleTimer=setInterval((function(){e.drawToggle=!1,clearInterval(e.drawToggleTimer)}),1500)}},{key:"drawNotification",value:function(e){this.gameStatus||this.ctx.clearRect(825,472,180,28),this.ctx.font="bold 28px sans-serif",this.ctx.lineWidth=1,this.ctx.fillStyle="#ffd24c",this.ctx.fillText(e,825,495)}},{key:"drawSoundToggle",value:function(e){"soundFX"===e?this.soundFXEnabled&&this.drawToggle?this.drawNotification("SOUND: ON"):!this.soundFXEnabled&&this.drawToggle&&this.drawNotification("SOUND: OFF"):this.musicEnabled&&this.drawToggle?this.drawNotification("MUSIC: ON"):!this.musicEnabled&&this.drawToggle&&this.drawNotification("MUSIC: OFF")}},{key:"gameOver",value:function(){return this.level.playerCollision(this.player,this.scoreTracker)||this.player.hitBottom()}},{key:"reset",value:function(){this.difficultyIncreaseTimer&&clearInterval(this.difficultyIncreaseTimer),this.gameStatus=!1,this.player.stopSoundFX(),this.player=new m(this.ctx),this.level=new M,this.soundFXEnabled||(this.player.toggleSoundFX(),this.level.toggleSoundFX()),this.scoreTracker.resetScore(),this.scoreTracker=new X(this),this.showRestartMessage(this.finalScore),this.gameMusic.pause(),this.gameMusic.currentTime=0}},{key:"showRestartMessage",value:function(e){this.finalScoreMessage.innerHTML="FINAL SCORE: ".concat(e),this.restartMessage.className="show"}},{key:"hideRestartMessage",value:function(){this.restartMessage.className="hide"}},{key:"animate",value:function(){this.gameStatus&&!this.gamePaused&&(this.background.animate(),this.player.animate(this.ctx),this.level.animate(this.ctx),this.scoreTracker.draw(this.ctx),this.drawToggle&&this.drawSoundToggle(this.currentToggle),this.gameOver()&&(this.finalScore=Math.floor(this.scoreTracker.score),this.gameOverSound.play(),this.reset()),requestAnimationFrame(this.animate))}},{key:"start",value:function(){var e=this;this.gameStatus=!0,this.hideRestartMessage(),this.scoreTracker.initializeScore(),this.gameOverSound.pause(),this.gameOverSound.currentTime=0,this.gameMusic.play(),this.difficultyIncreaseTimer=setInterval((function(){e.level.difficulty<10&&e.level.difficulty++,e.scoreTracker.scoreMultiplyer+=.5}),1e4),this.animate()}}])&&j(t.prototype,i),n&&j(t,n),e}();i(0),i(1);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),i=document.getElementById("bg-canvas").getContext("2d");new B(e,t,i).initializeGame()}))}]);
//# sourceMappingURL=main.js.map